<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YANSSZS STORE – Kalkulator ETA Robux</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter&family=Poppins:wght@700&display=swap');

    /* Reset and base */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      background: #f5f7fa;
      color: #333;
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    /* Header */
    header {
      text-align: center;
      margin-bottom: 60px;
      user-select: none;
    }
    h1.logo {
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
      font-size: 3rem;
      margin: 0;
      opacity: 0;
      transform: translateY(-50px);
      animation: slideDown 1.5s ease-out forwards;
    }
    h2.subtitle {
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
      font-size: 1.5rem;
      margin: 8px 0 0 0;
      opacity: 0;
      animation: fadeIn 2s ease forwards;
      animation-delay: 0.5s;
    }
    @keyframes slideDown {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    /* Calculator card */
    .calculator-card {
      background: #fff;
      border: 1px solid #d4af37;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      max-width: 400px;
      width: 100%;
      padding: 30px;
      animation: fadeInUp 1s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
      user-select: none;
    }
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Form elements */
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 1rem;
      color: #333;
    }
    input[type="date"],
    input[type="time"] {
      width: 100%;
      padding: 12px 14px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      transition: border-color 0.2s ease;
    }
    input[type="date"]:focus,
    input[type="time"]:focus {
      border-color: #d4af37;
      outline: none;
      box-shadow: 0 0 6px #d4af37aa;
    }

    button#calculateBtn {
      width: 100%;
      padding: 14px;
      background: #d4af37;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.15s, box-shadow 0.15s;
      user-select: none;
      pointer-events: auto !important;
      z-index: 100;
      position: relative;
      overflow: visible;
    }
    button#calculateBtn:hover,
    button#calculateBtn:focus {
      transform: scale(1.05) translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      outline: none;
    }

    /* Result panel */
    #resultPanel {
      max-width: 400px;
      width: 100%;
      margin: 30px auto 0 auto;
      background: #fff;
      border: 1px solid #d4af37;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      padding: 25px 30px;
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      color: #333;
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease, opacity 0.5s ease;
      user-select: none;
    }
    #resultPanel.show {
      opacity: 1;
      max-height: 200px;
    }
    #resultPanel p {
      margin: 0 0 15px 0;
      font-weight: 600;
    }
    #resultPanel p strong {
      font-weight: 700;
      margin-left: 0.3rem;
    }

    /* Floating WhatsApp button */
    #whatsappBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: #25d366;
      border-radius: 50%;
      box-shadow: 0 6px 15px rgba(37, 211, 102, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      animation: pulse 2s infinite ease-in-out;
      pointer-events: auto !important;
      z-index: 100;
      text-decoration: none;
    }
    #whatsappBtn:hover,
    #whatsappBtn:focus {
      background: #1ebe57;
      outline: none;
    }
    #whatsappBtn svg {
      width: 28px;
      height: 28px;
      fill: white;
    }
    @keyframes pulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(37, 211, 102, 0);
      }
    }

    /* Scroll to top button */
    #scrollTopBtn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 44px;
      height: 44px;
      background: #d4af37;
      border-radius: 50%;
      box-shadow: 0 6px 15px rgba(212, 175, 55, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 100;
      border: none;
      user-select: none;
    }
    #scrollTopBtn.visible {
      opacity: 1;
      pointer-events: auto;
    }
    #scrollTopBtn:hover,
    #scrollTopBtn:focus {
      background: #b38f2a;
      outline: none;
    }
    #scrollTopBtn svg {
      width: 22px;
      height: 22px;
      stroke: #333;
      stroke-width: 2.5;
      stroke-linecap: round;
      stroke-linejoin: round;
      fill: none;
    }

    /* Global pointer-events override */
    button, a {
      pointer-events: auto !important;
      z-index: 100;
    }
    .overlay, .blocking {
      pointer-events: none !important;
      z-index: 1;
    }

    /* Responsive */
    @media (max-width: 440px) {
      .calculator-card,
      #resultPanel {
        max-width: 90vw;
        margin-left: auto;
        margin-right: auto;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1 class="logo" aria-label="YANSSZS STORE">YANSSZS STORE</h1>
    <h2 class="subtitle" aria-label="Kalkulator ETA Robux">Kalkulator ETA Robux</h2>
  </header>

  <main>
    <section id="calculator" class="calculator-card" aria-label="Formulir Kalkulator ETA Robux">
      <label for="purchaseDate">Tanggal Pembelian (DD Bulan Tahun)</label>
      <input type="date" id="purchaseDate" aria-required="true" aria-describedby="dateHelp" />

      <label for="purchaseTime">Waktu Pembelian (Jam:Menit, 24-jam)</label>
      <input type="time" id="purchaseTime" aria-required="true" aria-describedby="timeHelp" />

      <button id="calculateBtn" type="button" aria-live="polite" aria-atomic="true" aria-label="Hitung Estimasi Datang">
        Hitung Estimasi Datang
      </button>
    </section>

    <div id="resultPanel" class="hidden" role="region" aria-live="polite" aria-atomic="true" tabindex="-1">
      <p>
        Tanggal & Waktu Pembelian (ET):
        <strong id="purchaseText" aria-label="Tanggal dan waktu pembelian"></strong>
      </p>
      <p>
        Estimasi Kedatangan (ET):
        <strong id="etaText" aria-label="Estimasi kedatangan"></strong>
      </p>
    </div>
  </main>

  <footer aria-label="Footer" style="margin-top: auto; user-select:none; text-align:center; padding: 15px 0; color:#555; font-size:0.9rem;">
    © YANSSZS STORE. All rights reserved.
  </footer>

  <!-- WhatsApp floating button -->
  <a
    href="https://wa.me/6281234567890?text=Halo%20saya%20mau%20top-up%20Robux"
    target="_blank"
    rel="noopener noreferrer"
    id="whatsappBtn"
    aria-label="Hubungi kami via WhatsApp"
  >
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
      <path d="M20.52 3.48A11.94 11.94 0 0012 0C5.373 0 0 5.373 0 12a11.94 11.94 0 001.64 6.04L0 24l5.96-1.64A11.94 11.94 0 0012 24c6.627 0 12-5.373 12-12 0-3.2-1.25-6.2-3.48-8.52zm-8.52 17.52a8.4 8.4 0 01-4.5-1.3l-.32-.2-3.54.98.95-3.46-.21-.34a8.4 8.4 0 1111.62 3.32 8.3 8.3 0 01-4.9.6zM17.1 14.4c-.25-.12-1.48-.73-1.7-.81-.22-.08-.38-.12-.54.12-.16.25-.62.81-.76.98-.14.16-.28.18-.53.06-.25-.12-1.05-.39-2-1.23-.74-.66-1.24-1.48-1.39-1.73-.14-.25-.02-.38.11-.5.12-.12.25-.28.37-.42.12-.14.16-.25.25-.42.08-.16.04-.31-.02-.43-.06-.12-.54-1.3-.74-1.78-.2-.47-.4-.4-.54-.4-.14 0-.31-.02-.48-.02-.16 0-.43.06-.66.31-.22.25-.85.83-.85 2.02 0 1.18.87 2.32.99 2.48.12.16 1.7 2.6 4.12 3.64.58.25 1.03.4 1.38.51.58.18 1.11.15 1.53.09.47-.06 1.48-.6 1.69-1.18.2-.58.2-1.07.14-1.18-.06-.12-.22-.18-.48-.31z"/>
    </svg>
  </a>

  <!-- Scroll to top button -->
  <button id="scrollTopBtn" aria-label="Scroll ke atas" title="Scroll ke atas" type="button" aria-hidden="true">
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 19V5M5 12l7-7 7 7" stroke="#333" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    </svg>
  </button>

  <script defer>
    document.addEventListener('DOMContentLoaded', () => {
      // TODO: optimize performance and accessibility improvements

      const dateInput = document.getElementById('purchaseDate');
      const timeInput = document.getElementById('purchaseTime');
      const btn = document.getElementById('calculateBtn');
      const panel = document.getElementById('resultPanel');
      const purchaseTextEl = document.getElementById('purchaseText');
      const etaTextEl = document.getElementById('etaText');
      const scrollTopBtn = document.getElementById('scrollTopBtn');

      // Scroll to top button visibility toggle
      window.addEventListener('scroll', () => {
        if (window.scrollY > 200) {
          scrollTopBtn.classList.add('visible');
          scrollTopBtn.setAttribute('aria-hidden', 'false');
        } else {
          scrollTopBtn.classList.remove('visible');
          scrollTopBtn.setAttribute('aria-hidden', 'true');
        }
      });

      scrollTopBtn.addEventListener('click', () => {
        console.log('DEBUG:', new Date().toISOString(), 'scrollTopBtn clicked');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      btn.addEventListener('click', () => {
        console.log('DEBUG:', new Date().toISOString(), 'calculateBtn clicked');

        const d = dateInput.value;
        const t = timeInput.value;

        if (!d || !t) {
          alert('Mohon isi tanggal dan waktu pembelian dengan lengkap.');
          return;
        }

        try {
          // Combine date and time into ISO string
          const isoString = `${d}T${t}:00`;
          const purchaseDate = new Date(isoString);

          if (isNaN(purchaseDate.getTime())) {
            alert('Mohon isi tanggal dan waktu pembelian dengan benar.');
            return;
          }

          // Format options: day, month, year, time with AM/PM EST
          const options = {
            timeZone: 'America/New_York',
            day: '2-digit',
            month: 'long',
            year: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            hour12: true,
          };
          const formatter = new Intl.DateTimeFormat('en-US', options);

          // Format purchase date/time
          const formattedPurchase = formatter.format(purchaseDate) + ' EST';

          // Calculate ETA +120 hours (5 days)
          const etaDate = new Date(purchaseDate.getTime() + 120 * 3600 * 1000);
          const formattedETA = formatter.format(etaDate) + ' EST';

          // Update DOM
          purchaseTextEl.textContent = formattedPurchase;
          etaTextEl.textContent = formattedETA;

          // Show result panel with animation
          panel.classList.add('show');
          panel.classList.remove('hidden');
          panel.focus();
        } catch (err) {
          console.error('ERROR:', err);
          alert('Terjadi kesalahan saat menghitung. Silakan coba lagi.');
        }
      });

      // Self-test: simulate clicks on buttons and links to verify no blocking overlays
      setTimeout(() => {
        document.querySelectorAll('button, a').forEach(el => {
          try {
            el.click();
            console.log('Test click OK:', el);
          } catch (e) {
            console.error('Test click failed:', el, e);
          }
        });
      }, 1000);
    });
  </script>
</body>
</html>